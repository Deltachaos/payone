{% extends model('component') %}

{% define config = {
    name: 'payone-credit-card',
    tag: 'payone-credit-card'
} %}

{% define data = {
    form: required,
    scriptSrc: 'https://secure.pay1.de/client-api/js/v1/payone_hosted_min.js'
} %}

{% define attributes = {
    'form-selector': '[name="paymentForm"]',
    'current-payment-method-selector': 'input[type="radio"][name="paymentForm[paymentSelection]"]:checked',
    'card-type-selector': '#cardtype',
    'card-holder-selector': '#paymentForm_payoneCreditCard_cardholder',
    'client-api-config-selector': '#paymentForm_payoneCreditCard_payone_client_api_config',
    'language-selector': '#Payone_credit_card_payone_client_lang_code',
    'pseudo-card-pan-selector': '#pseudocardpan',
    'error-container-selector': '#errorOutput'
} %}

{% block body %}
    {% include molecule('script-loader') with {
        attributes: {
            src: data.scriptSrc
        }
    } only %}

    <div id="payoneCreditCard" class="grid">
        <div class="form__field col col--sm-12">
            <label for="cardtypeInput">{{ 'Payone_credit_card.cardtype' | trans }}</label>
            {{ form_widget(data.form.payoneCreditCard.cardtype, { 'id': 'cardtype', 'attr': {'placeholder': 'Payone_credit_card.cardtype' | trans } }) }}
        </div>

        <div class="form__field col col--sm-12">
            <label for="cardpanInput">{{ 'Payone_credit_card.cardpan' | trans }}</label>
            <div id="cardpan"></div>
        </div>

        <div class="form__field col col--sm-12">
            <label for="cvcInput">{{ 'Payone_credit_card.cardcvc2' | trans }}</label>
            <div id="cardcvc2"></div>
        </div>

        <div class="form__field col col--sm-12">
            <label for="expireInput">{{ 'Payone_credit_card.cardexpiredate' | trans }}</label>
            <div id="expireInput" class="grid">
                <span id="cardexpiremonth" class="form__field col col--md-4"></span>
                <span id="cardexpireyear" class="form__field col col--md-8"></span>
            </div>
        </div>

        <div class="form__field col col--sm-12">
            <label>{{ 'Payone_credit_card.cardholder' | trans }}</label>
            <div>
                {{ form_widget(data.form.payoneCreditCard.cardholder) }}
                {{ form_errors(data.form.payoneCreditCard.cardholder) }}
            </div>
        </div>

        <div class="form__field col col--sm-12">
            <div>
                {{ form_widget(data.form.payoneCreditCard.payone_client_api_config) }}
                {{ form_widget(data.form.payoneCreditCard.pseudocardpan, {'id': 'pseudocardpan'}) }}

                <input type="hidden" id="Payone_credit_card_payone_client_lang_code" name="payone_client_lang_code" value="{{ app.locale }}">
            </div>
        </div>

        <div id="errorOutput" class="text-alert"></div>
    </div>
{% endblock %}
